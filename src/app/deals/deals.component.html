<!--Banner-->
<div class="banner-wrapper">
<div class="container" style="background-image:url(assets/images/cater-banner.jpg)">
  <h1><span>choose your order</span></h1>
  <div class="leftButtons buttons hidden-md hidden-lg" *ngIf="items.length > 0"><a (click)="checkout()" class="whiteBtn cta-btn">Checkout</a></div>
  </div>
</div>
 <div class="clearfix"></div>


<!--Inside Sections-->
<div class="container-fluid">

    <div class="spinner" *ngIf="menuData == null">
      <div class="cube1 icon icon-pizza-icon"></div>
      <div class="cube2 icon icon-pizza-icon"></div>
    </div>

  <div class="two-column-wrapper" *ngIf="menuData != null && selectedMenuCat != null">
  <!--Left Panel Starts-->
    <div class="inside-column-container leftContent"> 
      <!-- Nav tabs -->
      <!-- <ul class="nav nav-tabs hidden-xs  orderTabs" role="tablist" id="tabSwitch" [ngClass]="{'full': showViewCart ==  false}">
        <li role="presentation" *ngFor="let cat of menuData; let i = index" [ngClass]="(cat.name == selectedMenuCat)? 'active': ''"> <a [routerLink]="['/menu', cat.name]" aria-controls="applyNow" role="tab" data-toggle="tab">{{cat.name}}</a> </li>
      </ul>
      <select class="custom-select visible-xs" [(ngModel)]="selectedMenuCat" target="#tabSwitch" (change)="changTab($event.target.value)">
        <option *ngFor="let cat of menuData"  value="{{cat.name}}">{{cat.name}}</option>
      </select> -->

      
        <div class="col-md-12 deal-bar" [ngClass]="{'full': showViewCart ==  false}">
          <a (click)="backToMenuPage()">Back to Menu</a>
          <p class="hidden540"><img src="{{cmsApiPath + '/'+ dealData.detailImage}}" alt="" ></p>
          <p class="visible540"><img src="{{cmsApiPath + '/'+ dealData.listImage}}" alt="" ></p>
          <!-- <span>{{dealData.deal.Deal.description}}</span>
 -->
        </div>
      
      
      <!-- Tab panes -->
      <div class="tab-content  deals-sub-menu">
        
        <ng-container *ngIf="selectedDealMenuCatId != null">
        <div role="tabpanel" *ngFor="let data of menuData; let z=index;" [ngClass]="{'active': (data.id == selectedDealMenuCatId)}"  class="tab-pane" id="{{data.name}}">
           
            <div class="content-wrapper">
                <div class="content-container">
                    <div class="favSection">
                        <div class="row">

                          <!--    Deal code -->

                          <div class="inside-column-container leftContent"> 
                              <!-- Nav tabs -->
                              <ul class="nav nav-tabs hidden-xs  orderTabs" role="tablist" id="tabSwitch" [ngClass]="{'full': showViewCart ==  false}">
                               
                                <ng-container *ngFor="let cat of dealData.categories; let j = index;">
                                   
                                      <li role="presentation" [ngClass]="(j == selectedDealMenuCatIndex)? 'active': ''"><span *ngIf="!cat.isEnable || j != selectedDealMenuCatIndex">{{cat.catText}}</span><a *ngIf="cat.isEnable && j == selectedDealMenuCatIndex"  aria-controls="applyNow" role="tab" data-toggle="tab">{{cat.catText}}</a> </li>
                                  
                                </ng-container>
                              </ul>
                              <select class="custom-select visible-xs" [(ngModel)]="selectedDealMenuCatIndex" target="#tabSwitch">
                                  <option *ngFor="let cat of dealData.categories; let j = index;"  value="{{j}}">{{cat.catText}}</option>
                                </select>

                                
                              </div>


                            <div class="sub-cat-section" *ngIf="data.subCatsName.length > 0">
                              
                              <div class="col-md-6" *ngFor="let subCt of data.subCats | keysPipe; let r=index;">
                                <h3 class="sub-head">{{subCt.key}}<br/>
                                <small>{{data.subCatsPrice[r]}}</small></h3>
                                <div class="row">
                                  
                                <div *ngFor="let subProducts of subCt.value" class="col-md-12">
                                  <ng-container *ngFor="let subProd of subProducts.products">
                                  <ng-container *ngIf="subProd.is_price_mapped == 1 && checkForDealArray(subProd.id, subProd.plu_code, subProd.category_id)">
                                  
                                  <div class="createWrapper">
                                    <div class="media">
                                      <div class="media-left">
                                        <div class="img-Wrapper" *ngIf="subProd.thumb_image == null" style="background-image:url(assets/images/pizza-images/2.jpg)"> </div>
                                        <div class="img-Wrapper" *ngIf="subProd.thumb_image != null" [ngStyle]="{'background-image': 'url(' + cmsApiPath + '/' + subProd.thumb_image + ')'}"> </div>
                                      </div>
                                      <div class="media-body media-middle">
                                        <div class="description">
                                          <div class="leftSection">
                                            <h4 class="media-heading">{{subProd.title}}</h4>
                                            
                                            <!-- <h5>{{subProd.price_title}}</h5> -->
                                            <p>{{subProd.short_description}}</p>
                                          </div>
                                          <div class="rightSection bottom"> <a (click)="addToCart(subProd.slug, subProd.mod_count)" class="addBtn cta-btn"><span class="glyphicon glyphicon-plus"></span></a> </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                  </ng-container>
                                  </ng-container>
                                </div>
                                                               
                                </div>
                              </div>                             
               
                            </div> 
                            
                            <ng-container *ngIf="data.subCatsName.length == 0">
                              <div class="sub-deal-list">
                            <div  class="col-md-6 " *ngFor="let prod of data.products">
                              
                              <div class="createWrapper" *ngIf="prod.is_price_mapped == 1 && checkForDealArray(prod.id, prod.plu_code, prod.category_id)"> 
                                  <ng-container>
                                    <div class="media">
                                      <div class="media-left">
                                        <div class="img-Wrapper" *ngIf="prod.thumb_image == null" style="background-image:url(assets/images/pizza-images/2.jpg)"> </div>
                                          <div class="img-Wrapper" *ngIf="prod.thumb_image != null" [ngStyle]="{'background-image': 'url(' + cmsApiPath + '/' + prod.thumb_image + ')'}"> </div>
                                      </div>
                                      <div class="media-body media-middle">
                                        <div class="description">
                                          <div class="leftSection">
                                            <h4 class="media-heading">{{prod.title}}</h4>
                                            
                                             <h5>{{prod.price_title}} </h5> 
                                            <p>{{prod.short_description}}</p>
                                          </div>
                                          <div class="rightSection bottom"> <a (click)="addToCart(prod.slug, prod.mod_count)" class="addBtn cta-btn"><span class="glyphicon glyphicon-plus"></span></a> </div>
                                        </div>
                                      </div>
                                    </div>
                                  </ng-container>
                              </div> 
                            </div>
                          </div>
                              

                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </ng-container>

        <ng-container *ngIf="selectedDealMenuCatId == null"> 
          All deal items added. Please click on proceed to checkout.
        </ng-container>


      </div>
    </div>
    <!--Left Panel Ends-->
    <!--Right Panel Starts-->
    <div class="inside-column-container aside-wrapper orderProcessIns hidden-xs" *ngIf="showViewCart">

      <ng-container *ngIf="items.length == 0">  
        <h3>My Order</h3>
        <div class="content-wrapper">
          <div class="content-container">
            <div class="cart_img">
              <h6>Your cart is empty</h6>
              <img src="assets/images/cart-img.png" alt=""> </div>
          </div>
        </div>
      </ng-container>  
      <ng-container *ngIf="items.length > 0">  
          
        <h3>view cart <!-- <a class="down-nutri" href="https://nkdpizza.com/uk/nkd-nutrition-information.pdf" target="_blank"><img src="assets/images/nutrition-info-icon.svg" height="50" width="50"></a> --></h3>
        <div class="content-wrapper">
          <div class="right-padd">
              <div class="scroller">
                  
                  <ng-container *ngFor="let item of formattedItems.deals; let i=index;">
                      
                                <div class="cartbox">
                        
                        
                                <div class="item_info">
                                      <h4>{{item.title}}</h4>  
                                      <ul>
                                        <ng-container *ngFor="let dItem of item.dealData">
                                          <li>{{dItem.Product.title}}</li>
                                        </ng-container>
                                      </ul>                           
                                </div>
                                    <div class="item_pic">
                                        <div class="img-control">
                                            <a (click)="deleteDealItem(item.dealData[0].Product.dealId, item.dealData[0].Product.comboUniqueId)"><span class="icon icon-close"></span></a>
                                            
                                        </div>
                                        <!--<img *ngIf="item.Product.thumb_image == null" src="assets/images/pizza-images/2.jpg" alt="" class="item">
                                        <img *ngIf="item.Product.thumb_image != null" src="{{cmsApiPath + '/' + item.Product.thumb_image}}" alt="" class="item">-->
                                        
                                    </div>
                                
                        
                        </div>
                              
                      </ng-container>		
                            
                      <ng-container *ngFor="let item of formattedItems.otherItems; let i=index;">
                      
                                <div class="cartbox">
                        
                        
                          <div class="item_info">
                                        <h4>{{item.Product.title}}</h4>  
                                        <ng-container *ngFor="let mod of item.ProductModifier">
                                          <!--<h5 class="space">{{mod.Modifier.title}}</h5>-->
                                          <ul>                            
                                              <ng-container *ngFor="let option of mod.Modifier.ModifierOption">
                                                      
                                                  <ng-container *ngIf="(option.Option.plu_code == 217 || option.Option.plu_code == 'I100' || option.Option.plu_code == 'I101') && option.Option.is_checked">
                                                  <li><strong>Crust:</strong> {{option.Option.name}}</li>
                                                </ng-container>  
                                                <ng-container *ngIf="(option.Option.plu_code == 999991 || option.Option.plu_code == 999992 || option.Option.plu_code == 999993) && option.Option.is_checked">
                                                  <li><strong>Size:</strong> {{option.Option.name}}</li>
                                                </ng-container>  
              
                                                <ng-container *ngIf="option.Option.is_checked && option.Option.is_included_mod && option.Option.add_extra && option.Option.plu_code != 217 && option.Option.plu_code != 'I100' && option.Option.plu_code != 'I101' && option.Option.plu_code != 999991 && option.Option.plu_code != 999992 && option.Option.plu_code != 999993">
                                                  <li>+ {{option.Option.name}} <small *ngIf="option.Option.add_extra">(Add Extra)</small> <ng-container *ngIf="item.Product.category_id == 1">({{option.Option.subop_name}})</ng-container></li>
                                                </ng-container>
                                                <ng-container *ngIf="!option.Option.is_checked && option.Option.is_included_mod && option.Option.plu_code != 217 && option.Option.plu_code != 'I100' && option.Option.plu_code != 'I101' && option.Option.plu_code != 999991 && option.Option.plu_code != 999992 && option.Option.plu_code != 999993">
                                                  <li>- {{option.Option.name}} <small *ngIf="option.Option.add_extra">(Add Extra)</small> <ng-container *ngIf="item.Product.category_id == 1">({{option.Option.subop_name}})</ng-container></li>
                                                </ng-container> 
                                                <ng-container *ngIf="option.Option.is_checked && !option.Option.is_included_mod && option.Option.plu_code != 217 && option.Option.plu_code != 'I100' && option.Option.plu_code != 'I101' && option.Option.plu_code != 999991 && option.Option.plu_code != 999992 && option.Option.plu_code != 999993">
                                                  <li>+ {{option.Option.name}} <small *ngIf="option.Option.add_extra">(Add Extra)</small> <ng-container *ngIf="item.Product.category_id == 1">({{ option.Option.subop_name}})</ng-container></li>
                                                </ng-container> 
                                                <!--<li *ngIf="option.Option.is_checked">Add {{option.Option.name}}</li>-->
                                              </ng-container>                    
                                          </ul>    
                                        </ng-container>                      
                                    </div>
                                    <div class="item_pic">
                                        <div class="img-control">
                                            <a (click)="deleteItem(i, item)"><span class="icon icon-close"></span></a>
                                            <!-- <a *ngIf="item.ProductModifier.length > 0 && item.Product.dealId == undefined" (click)="editItem(i, item)"><span class="icon icon-edit"></span></a> -->
                                        </div>
                                        <img *ngIf="item.Product.thumb_image == null" src="assets/images/pizza-images/2.jpg" alt="" class="item">
                                        <img *ngIf="item.Product.thumb_image != null" src="{{cmsApiPath + '/' + item.Product.thumb_image}}" alt="" class="item">
                                        
                                        <!-- <div class="quantity" *ngIf="item.Product.dealId == undefined"><a (click)="updateQuantity(0, item.Product.plu_code, i)">-</a><span class="num">{{item.Product.qty}}</span><a (click)="updateQuantity(1, item.Product.plu_code, i)">+</a></div> -->
                                    </div>
                                
                        
                        </div>
                              
                      </ng-container>		
                  
              </div>
          </div>
          <div class="sumarry-box">
          <!-- <div class="total">
          <label>Sub total</label>
          <span>{{currencyCode}}{{netCost}}</span>
          </div> -->
          <a (click)="backToMenuPage()">Back to Menu</a>
          </div>
        </div>
      </ng-container>                
    </div>
    <!--Right Panel Ends -->
  </div>
</div>
