<!--Banner-->
<div class="banner-wrapper">
<div class="container" style="background-image:url(assets/images/cater-banner.jpg)">
  <h1><span>Choose Payment Method</span></h1>
  <!--<div class="leftButtons buttons hidden-md hidden-lg"><a href="#" class="whiteBtn cta-btn">Quick View</a><span class="cost">84 {{currencyCode}}</span><a href="#" class="greenBtn cta-btn hidden-xs">Checkout</a><a href="#" class="greenBtn cta-btn visible-xs btn-sm">Checkout</a> </div>-->
  <!--<div class="leftButtons searchBox">
    <input type="text" class="form-control" placeholder="">
    <button class="icon-search"></button>
  </div>-->
  </div>
</div>
 <div class="clearfix"></div>

<ng-container *ngIf="showLoading">
  <div class="spinner">
      <div class="cube1 icon icon-pizza-icon"></div>
      <div class="cube2 icon icon-pizza-icon"></div>
  </div>
</ng-container>

<!--Inside Sections-->
<div class="container-fluid">
  <div class="col-md-12 steprow text-center">
      <ul>
        <li><small>1</small> Order Review</li>  
        <li class="active"><small>2</small> Checkout</li>  
        <li><small>3</small> Order Complete</li>  
      </ul>  
  </div>

 <div class="col-md-12 stepboxes">
  <div class="row" >
      <div class="col-md-4 col-sm-4">
         <h3 class="green-title">payment summary</h3>
         <div class="dottedlist_box">
            <ul class="dotted-list">
                <li>Coupon Discount<span>{{couponDiscount}}</span></li>
                <li>Sub Total<span>{{netCost}}</span></li> 
                <li>Taxes<span>00.00</span></li> 
                <li *ngIf="orderData.order_type=='delivery'">Delivery Charge<span>6.00</span></li> 
            </ul>
             <div class="grand-total">
                Grand Total <span>{{currencyCode}} {{totalCost}}</span>
             </div>
             <address class="delivery_addrs" *ngIf="orderData.order_type == 'delivery'">
                <h4>delivery address</h4>
                <p><strong>{{orderData.user.first_name}} {{orderData.user.last_name}}<br></strong>
                {{orderData.address.apartment}}, {{orderData.address.street_no}}<br>
                {{orderData.address.street}} {{orderData.address.city}}<br>
                {{orderData.address.state}} - {{orderData.address.postal_code}}<br>
                Phone: {{orderData.user.phone}}</p>
             </address>
         </div>
      </div>
      <div class="col-md-8 col-sm-8">
        <h3 class="green-title">choose a payment method</h3>
        <div class="payment_method">
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"> <a href="#cod" aria-controls="cod" role="tab" data-toggle="tab">Pay on Delivery Cash or Credit</a> </li> 
                <li role="presentation"> <a href="#cd-cards" aria-controls="cd-cards" role="tab" data-toggle="tab">Online Payment</a> </li> 
            </ul>
            <div class="tab-content three-column-wrapper">
                <div role="tabpanel" class="tab-pane fade in active inside-column-container" id="cod">
                    <div class="content-wrapper">
                        <div class="content-container">
                            <div class="control-group payment">
                                <label class="control radio" [ngClass]="{'checked': orderData.payment_type == 'Cash'}" (click)="updatePaymentType('Cash')">
                                    <h4>Cash</h4>
                                    <div class="control__indicator"></div>    
                                </label>
                                <label class="control radio" [ngClass]="{'checked': orderData.payment_type == 'Credit'}" (click)="updatePaymentType('Credit')">
                                    <h4>Credit</h4>
                                    <div class="control__indicator"></div>    
                                </label>
                            </div>
                        </div>
                    </div>

                    <a *ngIf="showPlaceOrder" class="btn-red btn-block" (click)="placeOrder()">continue</a>
                </div>
                <!-- <div role="tabpanel" class="tab-pane fade" id="cd-cards" style="text-align: center;">
                    <img src="assets/images/cs.png" alt="Coming Soon" style="max-width: 50%;">
                </div> -->

                <div role="tabpanel" class="tab-pane fade in" id="cd-cards">
                    <h5>
                        Credit/debit card details
                        <img src="assets/images/payment-icon.png" style="margin-left:10px; " />
                    </h5>
                    <form #newRuleForm="ngForm" name="addressForm" novalidate (ngSubmit)="payOnline(newRuleForm.valid)">
                        <fieldset>
                            <div class="alert alert-danger" *ngIf="payError != ''">{{payError}}</div>
                            <div class="row col-md-12 card-no">
                                <label>Card number</label>
                                <span><input type="number" id="cardNumber" name="cardNumber" [(ngModel)]="card.card" placeholder="Enter card number" #cardNumber="ngModel" required autocomplete="off"></span>
                                <div [hidden]="cardNumber.valid  || (cardNumber.pristine  && !newRuleForm.submitted)" class="alert alert-danger">
                                    <div>Card Number is required.</div>
                                </div>
                            </div>
                            <div class="row col-md-8">
                                <label>Expiration date</label>
                                <span>
                                    <select class="half" id="cardMonth" placeholder="Month" name="cardMonth" [(ngModel)]="card.expirationMonth" #cardMonth="ngModel" required>
                                        <option value="">Select Month</option>
                                        <option *ngFor="let month of months" value="{{month.value}}">{{month.text}}</option>   
                                        
                                    </select>

                                    <select class="half" id="cardYear" placeholder="Year" name="cardYear" [(ngModel)]="card.expirationYear" #cardYear="ngModel" required>
                        
                                        <ng-container *ngFor="let year of years">
                                            <option value="{{year}}">{{year}}</option>   
                                        </ng-container> 
                                    </select>
                                </span>
                            </div>
                            <div class="row col-md-4">
                                <label>CVV code <img src="assets/images/info-icon.png"/></label>
                                <span><input type="text" maxlength="4" id="cardCVC" name="cardCVC" [(ngModel)]="card.cvc" placeholder="CVV/CVC" #cardCVC="ngModel" required autocomplete="off"></span>
                            </div>
                            <div [hidden]="cardMonth.valid  || (cardMonth.pristine  && !newRuleForm.submitted)" class="alert alert-danger">
                                <div>Month is required.</div>
                            </div>
                            <div [hidden]="cardYear.valid  || (cardYear.pristine  && !newRuleForm.submitted)" class="alert alert-danger">
                                <div>Year is required.</div>
                            </div>
                            <div [hidden]="cardCVC.valid  || (cardCVC.pristine  && !newRuleForm.submitted)" class="alert alert-danger">
                                <div>CVC is required.</div>
                            </div>
                            <div class="row col-md-12">
                                <label>Card holder name</label>
                                <span><input type="text" id="cardName" name="cardName" [(ngModel)]="card.name" placeholder="Enter card holder name" #cardName="ngModel" required autocomplete="off"></span>
                            </div>
                            <div [hidden]="cardName.valid  || (cardName.pristine  && !newRuleForm.submitted)" class="alert alert-danger">
                                <div>Card holder name is required.</div>
                            </div>
                            <div class="row col-md-12">
                                <label>Postal code</label>
                                <span><input type="text" id="cardPostalCode" name="cardPostalCode" [(ngModel)]="card.postalCode" placeholder="Enter postal code" #cardPostalCode="ngModel" required autocomplete="off"></span>
                            </div>
                            <div [hidden]="cardPostalCode.valid  || (cardPostalCode.pristine  && !newRuleForm.submitted)" class="alert alert-danger">
                                <div>Postal Code is required.</div>
                            </div>
                            <div class="row col-md-12 submit">
                                <button *ngIf="showPlaceOrder" class="btn-red btn-block">Submit</button>
                                <!-- <a *ngIf="showPlaceOrder" class="btn-red btn-block" (click)="payOnline(newRuleForm.valid)">Submit</a> -->
                            </div>
                        </fieldset>
                    </form>
                </div>
            </div>
        </div>
      </div>
  </div>
 </div> 
</div>
