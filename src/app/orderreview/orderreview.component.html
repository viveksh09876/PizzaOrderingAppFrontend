<!--Banner-->
<div class="banner-wrapper">
<div class="container" style="background-image:url(assets/images/cater-banner.jpg)">
  <h1><span>choose your order</span></h1>
  <div class="leftButtons buttons"><a [routerLink]="['/menu']" class="whiteBtn cta-btn">Back To Menu</a></div>
  <!--<div class="leftButtons searchBox">
    <input type="text" class="form-control" placeholder="">
    <button class="icon-search"></button>
  </div>-->
  </div>
</div>
 <div class="clearfix"></div>


<!--Inside Sections-->
<div class="container-fluid">
  <div class="col-md-12 steprow text-center">
      <ul>
        <li class="active"><small>1</small> Order Review</li>  
        <li><small>2</small> Checkout</li>  
        <li><small>3</small> Order Complete</li>  
      </ul>  
  </div>
  <div class="col-md-12 stepboxes">
  <div class="row step1" *ngIf="showStep == 'step1'">
     <div class="col-md-4 col-sm-4">
          <h3 class="green-title">order summary</h3>
          <div class="gray_box">
            <div class="scroller">
                <div class="cartbox" *ngFor="let item of items; let i=index;">
                    <div class="item_info">
                        <h4>{{item.Product.title}}</h4>
                        <ng-container *ngFor="let mod of item.ProductModifier">
                            <!--<h5 class="space">{{mod.Modifier.title}}</h5>-->
                            <ul>                            
                                <ng-container *ngFor="let option of mod.Modifier.ModifierOption">
                                  
                                  <ng-container *ngIf="(option.Option.plu_code == 91 || option.Option.plu_code == 'I100' || option.Option.plu_code == 'I101') && option.Option.is_checked">
                                    <li><strong>Crust:</strong> {{option.Option.name}}</li>
                                  </ng-container>  
                                  <ng-container *ngIf="(option.Option.plu_code == 999991 || option.Option.plu_code == 999992 || option.Option.plu_code == 999993) && option.Option.is_checked">
                                    <li><strong>Size:</strong> {{option.Option.name}}</li>
                                  </ng-container>  

                                  <ng-container *ngIf="option.Option.is_checked && option.Option.is_included_mod && option.Option.add_extra && option.Option.plu_code != 91 && option.Option.plu_code != 'I100' && option.Option.plu_code != 'I101'">
                                    <li>+ {{option.Option.name}}</li>
                                  </ng-container>
                                  <ng-container *ngIf="!option.Option.is_checked && option.Option.is_included_mod && option.Option.plu_code != 91 && option.Option.plu_code != 'I100' && option.Option.plu_code != 'I101'">
                                    <li>- {{option.Option.name}}</li>
                                  </ng-container> 
                                  <ng-container *ngIf="option.Option.is_checked && !option.Option.is_included_mod && option.Option.plu_code != 91 && option.Option.plu_code != 'I100' && option.Option.plu_code != 'I101'">
                                    <li>- {{option.Option.name}}</li>
                                  </ng-container> 
                                  <!--<li *ngIf="option.Option.is_checked">Add {{option.Option.name}}</li>-->
                                </ng-container>                    
                            </ul>  
                          </ng-container>                         
                    </div>
                    <div class="item_pic">
                        <div class="img-control">
                            <a (click)="deleteItem(i, item)"><span class="icon icon-close"></span></a>
                              <!--<a href="#"><span class="icon icon-edit"></span></a>-->
                        </div>
                        <img *ngIf="item.Product.thumb_image == null" src="assets/images/pizza-images/2.jpg" alt="" class="item">
                        <img *ngIf="item.Product.thumb_image != null" src="{{cmsApiPath + '/' + item.Product.thumb_image}}" alt="" class="item">
                        <div class="quantity"><a (click)="updateQuantity(0, item.Product.plu_code, i)">-</a><span class="num">{{item.Product.qty}}</span><a (click)="updateQuantity(1, item.Product.plu_code, i)">+</a></div>
                    </div>
                </div>
            </div>
        </div>
         <div class="save_orderbox text-center">
            <h5>save as favorite order</h5>
            <input type="text" placeholder="Order Name">
            <input type="submit" value="Save Favorite">
         </div>
     </div>  
     <div class="col-md-4 col-sm-4">
         <h3 class="green-title gray">enter details</h3>
         <div name="addressForm" class="order_reviewform" ngForm #newRuleForm="ngForm">
            <div class="col-md-6 col-sm-12">
                <div class="form-group">
                    <input class="form-control" placeholder="First Name*" name="firstName" type="text" [(ngModel)]="order.user.first_name" required>
                </div>
            </div>
            <div class="col-md-6 col-sm-12">
                <div class="form-group">
                    <input class="form-control" placeholder="Last Name*" type="text" name="lastName" [(ngModel)]="order.user.last_name" required>
                </div>
            </div>

            <div class="col-md-12 col-sm-12">
                <div class="form-group">
                    <input class="form-control" placeholder="Email address*" name="email" type="email" [(ngModel)]="order.user.email" required>
                </div>
            </div>

            <div class="col-md-12 col-sm-12">
                <div class="form-group">
                    <input class="form-control" placeholder="Mobile number*" name="phone" type="number" [(ngModel)]="order.user.phone" required>
                </div>
            </div>
        </div>
         <h3 class="green-title gray">confirm pickup or delivery?</h3>
         <ul class="radio_tabs">
            <li><label><input type="radio" name="pick" [(ngModel)]="order.order_type" value="pickup" (change)="addDeliveryCost($event,'pickup')" checked="{{order.order_type == 'pickup'? 'checked': ''}}"><small></small> pick up </label></li>
            <li><label><input type="radio" name="pick" [(ngModel)]="order.order_type" value="delivery" checked="{{order.order_type == 'delivery'? 'checked': ''}}" (change)="addDeliveryCost($event,'delivery')"><small></small> delivery </label></li>
         </ul>
         <ng-container *ngIf="order.order_type == 'delivery'">
            <form class="order_reviewform" name="orderReviewForm">
                <div class="col-md-6 col-sm-12">
                    <div class="form-group">
                        <input class="form-control" placeholder="Appt#" type="text" name="apartment" [(ngModel)]="order.address.apartment">
                    </div>
                </div>
                <div class="col-md-6 col-sm-12">
                    <div class="form-group">
                        <input class="form-control" placeholder="Street#" type="text" name="streetNo" [(ngModel)]="order.address.streetNo">
                    </div>
                </div>
                <div class="col-md-6 col-sm-12">
                    <div class="form-group">
                        <input class="form-control" placeholder="Street / Building name" name="street" type="text" [(ngModel)]="order.address.street">
                    </div>
                </div>
                <div class="col-md-6 col-sm-12">
                    <div class="form-group">
                        <input class="form-control" placeholder="City" type="text" name="city" [(ngModel)]="order.address.city">
                    </div>
                </div>
                <div class="col-md-6 col-sm-12">
                    <div class="form-group">
                        <input class="form-control" placeholder="State" type="text" name="state" [(ngModel)]="order.address.state">
                    </div>
                </div>
                <div class="col-md-6 col-sm-12">
                    <div class="form-group">
                        <input class="form-control" placeholder="Postal Code" type="text" name="postal_code" [(ngModel)]="order.address.postal_code">
                    </div>
                </div>
            </form>
         </ng-container>
     </div>  
     <div class="col-md-4 col-sm-4">
        <h3 class="green-title">order details</h3>
         <div class="dottedlist_box">
            <form class="coupan_box">
                <input type="text" placeholder="Coupon Code">
                <input type="submit" value="Apply">
            </form>
            <ul class="dotted-list">
                <li>Coupon Discount<span>0.0</span></li> 
                <li>Sub Total<span>{{netCost}}</span></li> 
                <li>Taxes<span>0.00</span></li> 
                <li *ngIf="order.order_type=='delivery'">Delivery Charges <span>6.0</span></li> 
            </ul>
             <div class="grand-total">
                Grand Total <span>AED {{totalCost}}</span>
             </div>
             <div class="choosetime_box">
                 <ng-container>
                <h4>choose time</h4>
                 <ul class="radio_tabs">
                    <li><label><input type="radio" name="time" [checked]="order.delivery_time_type == 'asap'" (click)="updateDeliveryTimeType('asap');"><small></small> asap </label></li>
                    <li><label><input type="radio" name="time" [checked]="order.delivery_time_type == 'defer'" (click)="updateDeliveryTimeType('defer');"><small></small> later </label></li>
                 </ul>
                 <form class="order_reviewform">
                    <div class="col-md-6 col-sm-12" *ngIf="order.delivery_time_type == 'defer'">
                        <div class="form-group">
                            <input type="text" class="form-control" name="dateTime" [(ngModel)]="order.delivery_time" ngui-datetime-picker 
                                            date-format="MM/DD/YYYY HH:mm"
                                            min-date="{{curDate}}">
                        </div>
                    </div>
                    
                 </form>
                 </ng-container>
                 <button (click)="confirmOrder()" [disabled]="!newRuleForm.valid" class="fullred-btn placeorder-btn">Place Order</button>
             </div>
         </div>
     </div>  
  </div>


    <div class="row step2" *ngIf="showStep == 'step2'">
      <div class="col-md-4 col-sm-4">
         <h3 class="green-title">payment summary</h3>
         <div class="dottedlist_box">
            <ul class="dotted-list">
                <li>Coupon Discount<span>0.0</span></li> 
                <li>Sub Total<span>{{netCost}}</span></li> 
                <li>Taxes<span>0.00</span></li> 
                <li *ngIf="order.order_type=='delivery'">Delivery Charges <span>6.0</span></li> 
            </ul>
             <div class="grand-total">
                Grand Total <span>AED {{totalCost}}</span>
             </div>
             <address class="delivery_addrs" *ngIf="order.order_type == 'delivery'">
                <h4>delivery address</h4>
                <p><strong>{{order.user.firstName}} {{order.user.lastName}}<br></strong>
                {{order.address.apartment}} {{order.address.streetNo}}, {{order.address.street}}<br>
                {{order.address.city}}, {{order.address.state}} - {{order.address.postal_code}}
                Mobile: {{order.user.phone}}</p>
             </address>
             <address class="delivery_addrs pickupStore" *ngIf="order.order_type == 'pickup'">
                <h4>Store address</h4>
                <p><strong>{{order.user.firstName}} {{order.user.lastName}}<br></strong>
                {{order.address.apartment}} {{order.address.streetNo}}, {{order.address.street}}<br>
                {{order.address.city}}, {{order.address.state}} - {{order.address.postal_code}}<br>
                Mobile: {{order.user.phone}}</p>
             </address>
         </div>
      </div>
      <div class="col-md-8 col-sm-8">
        <h3 class="green-title">choose a payment method</h3>
        <div class="payment_method">
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"> <a href="#cod" aria-controls="cod" role="tab" data-toggle="tab">Payment on Delivery</a> </li> 
                <li role="presentation"> <a href="#cd-cards" aria-controls="cd-cards" role="tab" data-toggle="tab">Credit / Debit Card</a> </li> 
            </ul>
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane fade in active" id="cod">
                    <h5>pay using payment on Delivery</h5>
                    <p>Generate an OTP to my registered mobile number for verification</p>
                    <a class="btn-red btn-block" href="#">Click to Authenticate & place order</a>
                </div>
                <div role="tabpanel" class="tab-pane fade" id="cd-cards">
                    <h5>pay using Credit / Debit Card</h5>
                    <p>Generate an OTP to my registered mobile number for verification</p>
                    <a class="btn-red btn-block" (click)="placeFinalOrder()">Click to Authenticate & place order</a>
                </div>
            </div>
        </div>
      </div>
  </div>
 
</div>



